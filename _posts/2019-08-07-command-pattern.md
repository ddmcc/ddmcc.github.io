---
layout: post
title:  "设计模式之命令模式"
date:   2019-08-07 15:11:26
categories: 设计模式
tags:  设计模式 命令模式
author: ddmcc
---

* content
{:toc}


## 定义

将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；可以宏命令操作，对请求进行排队或者记录请求日志，以及支持可撤销的操作




## 使用场景


- 对请求发送者和请求接收者解耦，使得调用者和接收者不直接交互，而是通过请求对象
- 在某些场合，需要对请求进行记录，撤销/重做等处理，或者需要将多个请求组合在一起，即宏命令
- 对请求进行排队执行

## 模式结构

![](https://i.loli.net/2019/08/07/tfWiqmF4aJphzMv.png)


在客户端生成命令对象，调用调用者对象`Invoker`中的**setCommand()**方法，设置命令对象（命令对象可以是一个或多个，命令也可以不执行或记录下来执行多次），在某个时间点再调用命令对象中的`execute()`方法执行命令，
这将导致调用接受者`receiver`中的具体操作。

**具体也就是把Invoker和Receiver解耦，他们之间没有直接的引用关系，将请求发送者与请求处理中责任分开。**

![](https://i.loli.net/2019/08/07/IlgG9H6hw7LtXPZ.png)

---

时序图（网上扣得）

![](https://i.loli.net/2019/08/07/HVD6BWsba5XodO1.png)


## 使用栗子

假设有一个餐厅，里面有中餐和西餐，中餐由中餐厨师负责，西餐由西餐厨师负责，点单由前台小妹负责。

在以往的餐厅流程可能是这样的：

客人点菜 -> 菜单给前台小妹 -> 前台小妹根据菜去通知不同厨师 -> 厨师煮 -> 出菜

引入了命令模式后把菜单封装成命令对象，前台小妹不需要自己去通知厨师，只需开单即可！**不用关注是谁处理了这个订单，因为这个定单已经有了负责的厨师。**

客人点菜 -> 菜单（命令对象）给前台小妹 -> 前台小妹开单（调用订单call()方法） -> 厨师煮 -> 出菜

---
#### 类图

![](https://i.loli.net/2019/08/07/g4VR27vxwkJWmFy.png)


---
#### 代码













